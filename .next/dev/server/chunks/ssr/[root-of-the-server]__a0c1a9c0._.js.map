{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///home/reaper/gato-comics/src/app/leitor/%5BmangaId%5D/%5BchapterId%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { ArrowLeft, ChevronLeft, ChevronRight, Menu, MessageSquare, Settings, Heart } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport { useUserStore } from \"@/store/useUserStore\";\n\nexport default function ReaderPage({ params }: { params: { mangaId: string; chapterId: string } }) {\n  const router = useRouter();\n  const { unlockChapter, isUnlocked, patinhas } = useUserStore();\n  \n  // Estado da UI (Mostrar/Esconder menus)\n  const [showUI, setShowUI] = useState(true);\n  const [lastScrollY, setLastScrollY] = useState(0);\n\n  // Simulação de Imagens do Capítulo (Webtoon fatiado)\n  // Em um app real, isso viria de uma API/CDN\n  const pages = [\n    \"https://images.unsplash.com/photo-1518709268805-4e9042af9f23?q=80&w=600&auto=format&fit=crop\", // Imagem 1\n    \"https://images.unsplash.com/photo-1531512073830-ba890ca4eba2?q=80&w=600&auto=format&fit=crop\", // Imagem 2\n    \"https://images.unsplash.com/photo-1605806616949-1e87b487bc2a?q=80&w=600&auto=format&fit=crop\", // Imagem 3\n    \"https://images.unsplash.com/photo-1507608616759-54f48f0af0ee?q=80&w=600&auto=format&fit=crop\", // Imagem 4\n  ];\n\n  const currentChapter = parseInt(params.chapterId);\n  const nextChapterId = currentChapter + 1;\n\n  // Lógica de \"Smart UI\": Esconder menus ao rolar para baixo, mostrar ao rolar para cima\n  useEffect(() => {\n    const handleScroll = () => {\n      const currentScrollY = window.scrollY;\n      \n      if (currentScrollY > lastScrollY && currentScrollY > 100) {\n        setShowUI(false); // Rolando para baixo -> Esconde\n      } else {\n        setShowUI(true); // Rolando para cima -> Mostra\n      }\n      setLastScrollY(currentScrollY);\n    };\n\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, [lastScrollY]);\n\n  // Função para ir ao próximo capítulo (com verificação de pagamento)\n  const handleNextChapter = () => {\n    // Verifica se precisa pagar pelo próximo\n    // (Lógica simplificada: caps > 3 pagam)\n    if (nextChapterId > 3 && !isUnlocked(params.mangaId, nextChapterId)) {\n        const confirmBuy = window.confirm(`O Capítulo ${nextChapterId} custa 1 Patinha. Deseja desbloquear?`);\n        if (confirmBuy) {\n            const success = unlockChapter(params.mangaId, nextChapterId, 1);\n            if (success) {\n                router.push(`/leitor/${params.mangaId}/${nextChapterId}`);\n            } else {\n                alert(\"Saldo insuficiente!\");\n            }\n        }\n    } else {\n        // Se for grátis ou já comprado\n        router.push(`/leitor/${params.mangaId}/${nextChapterId}`);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-[#111] text-white\">\n      \n      {/* --- HEADER FLUTUANTE --- */}\n      <AnimatePresence>\n        {showUI && (\n          <motion.header\n            initial={{ y: -100 }}\n            animate={{ y: 0 }}\n            exit={{ y: -100 }}\n            className=\"fixed top-0 left-0 right-0 z-50 bg-black/80 backdrop-blur-md border-b border-white/10 h-16 flex items-center justify-between px-4\"\n          >\n            <div className=\"flex items-center gap-4\">\n              <Link href={`/obra/${params.mangaId}`} className=\"p-2 hover:bg-white/10 rounded-full transition-colors\">\n                <ArrowLeft className=\"w-6 h-6\" />\n              </Link>\n              <div>\n                <h1 className=\"text-sm font-bold text-gato-ghost uppercase tracking-wider\">Solo Leveling</h1>\n                <p className=\"text-xs text-gato-purple font-bold\">Capítulo {params.chapterId}</p>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-2\">\n               {/* Menu de Capítulos (Dropdown simplificado) */}\n              <button className=\"hidden md:flex items-center gap-1 bg-white/10 px-3 py-1 rounded-full text-xs hover:bg-white/20\">\n                <Menu className=\"w-3 h-3\" /> Lista\n              </button>\n              <button className=\"p-2 hover:bg-white/10 rounded-full\">\n                <Settings className=\"w-5 h-5\" />\n              </button>\n            </div>\n          </motion.header>\n        )}\n      </AnimatePresence>\n\n      {/* --- ÁREA DE LEITURA (IMAGENS) --- */}\n      {/* Clicar no meio da tela alterna a UI */}\n      <div \n        onClick={() => setShowUI(!showUI)} \n        className=\"w-full max-w-3xl mx-auto flex flex-col items-center bg-black min-h-screen pt-0 md:pt-0\"\n      >\n        {pages.map((src, index) => (\n          <img \n            key={index}\n            src={src}\n            alt={`Página ${index + 1}`}\n            className=\"w-full h-auto block select-none pointer-events-none\"\n            loading=\"lazy\"\n            style={{ display: 'block' }} // Garante que não haja espaço extra\n          />\n        ))}\n\n        {/* --- RODAPÉ DO CAPÍTULO (INTERAÇÃO) --- */}\n        <div className=\"w-full bg-gato-gray/20 p-8 text-center space-y-6 mt-4 pb-32\">\n            <h3 className=\"text-gato-muted text-sm uppercase tracking-widest\">Fim do Capítulo</h3>\n            \n            {/* Ações Sociais */}\n            <div className=\"flex justify-center gap-4\">\n                <button className=\"flex items-center gap-2 bg-white/5 px-4 py-2 rounded-full text-sm hover:bg-red-500/20 hover:text-red-400 transition-colors\">\n                    <Heart className=\"w-4 h-4\" /> Curtir\n                </button>\n                <button className=\"flex items-center gap-2 bg-white/5 px-4 py-2 rounded-full text-sm hover:bg-blue-500/20 hover:text-blue-400 transition-colors\">\n                    <MessageSquare className=\"w-4 h-4\" /> Comentários (128)\n                </button>\n            </div>\n\n            {/* Botões de Navegação */}\n            <div className=\"flex items-center justify-between max-w-sm mx-auto pt-4\">\n                <button \n                    onClick={() => {\n                        const prev = currentChapter - 1;\n                        if (prev > 0) router.push(`/leitor/${params.mangaId}/${prev}`);\n                    }}\n                    disabled={currentChapter <= 1}\n                    className=\"flex items-center gap-2 text-gato-muted hover:text-white disabled:opacity-30 disabled:cursor-not-allowed\"\n                >\n                    <ChevronLeft className=\"w-5 h-5\" /> Anterior\n                </button>\n\n                <button \n                    onClick={handleNextChapter}\n                    className=\"flex items-center gap-2 bg-gato-purple hover:bg-gato-purple/80 text-white px-8 py-3 rounded-full font-bold shadow-[0_0_15px_#8A2BE2] transition-all hover:scale-105 active:scale-95\"\n                >\n                    Próximo <ChevronRight className=\"w-5 h-5\" />\n                </button>\n            </div>\n        </div>\n      </div>\n\n      {/* --- FOOTER FLUTUANTE (BARRA DE PROGRESSO) --- */}\n      <AnimatePresence>\n        {showUI && (\n          <motion.footer\n            initial={{ y: 100 }}\n            animate={{ y: 0 }}\n            exit={{ y: 100 }}\n            className=\"fixed bottom-0 left-0 right-0 z-50 bg-black/90 backdrop-blur-md border-t border-white/10 px-6 py-4\"\n          >\n             <div className=\"max-w-3xl mx-auto flex items-center gap-4\">\n                {/* Botão Anterior Mini */}\n                <button className=\"text-gato-muted hover:text-white\">\n                    <ChevronLeft className=\"w-6 h-6\" />\n                </button>\n\n                {/* Barra de Progresso (Visual) */}\n                <div className=\"flex-1 h-1 bg-white/10 rounded-full overflow-hidden\">\n                    <div className=\"h-full bg-gato-purple w-3/4 rounded-full\" />\n                </div>\n                <span className=\"text-xs text-gato-muted\">Pag 18/24</span>\n\n                {/* Botão Próximo Mini */}\n                <button onClick={handleNextChapter} className=\"text-gato-muted hover:text-white\">\n                    <ChevronRight className=\"w-6 h-6\" />\n                </button>\n             </div>\n          </motion.footer>\n        )}\n      </AnimatePresence>\n\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}